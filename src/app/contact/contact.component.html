<div class="py-10" id="contact">
  <section class="container mx-auto px-4 py-16 bg-gray-50">
    <div class="max-w-lg mx-auto">
      <h2 class="text-3xl font-bold text-center mb-8 text-gray-800">Contactez-moi</h2>

      <form #contactForm="ngForm" (ngSubmit)="onSubmit(contactForm)" class="bg-white shadow-md rounded-lg p-8">

        <div class="mb-4">
          <label for="name" class="block text-gray-700 mb-2">Nom</label>
          <input type="text" id="name" name="name" [(ngModel)]="contact.name" #name="ngModel"
            class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500"
            required autocomplete="name">
          <p *ngIf="name.invalid && name.touched" class="text-red-500 text-sm">Le nom est requis.</p>
        </div>

        <div class="mb-4">
          <label for="email" class="block text-gray-700 mb-2">Email</label>
          <input type="email" id="email" name="email" [(ngModel)]="contact.email" #email="ngModel"
            class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500"
            required autocomplete="email">
          <p *ngIf="email.invalid && email.touched" class="text-red-500 text-sm">L'email est requis.</p>
          <p *ngIf="email.errors?.['email'] && email.touched" class="text-red-500 text-sm">L'email n'est pas valide.</p>
        </div>

        <div class="mb-4">
          <label for="phone" class="block text-gray-700 mb-2">Téléphone</label>
          <input type="tel" id="phone" name="phone" [(ngModel)]="contact.phone" #phone="ngModel"
            class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500"
            pattern="[0-9]{10}" required autocomplete="tel">
          <p *ngIf="phone.invalid && phone.touched" class="text-red-500 text-sm">Un numéro valide est requis.</p>
        </div>
        

        <div class="mb-4">
          <label for="message" class="block text-gray-700 mb-2">Message</label>
          <textarea id="message" name="message" rows="4" [(ngModel)]="contact.message" #message="ngModel"
            class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500"
            required></textarea>
          <p *ngIf="message.invalid && message.touched" class="text-red-500 text-sm">Le message est requis.</p>
        </div>

        <div class="mb-4 flex items-center">
          <input type="checkbox" id="confirm" name="confirm" [(ngModel)]="contact.confirm" #confirm="ngModel"
            class="h-5 w-5 text-orange-500 focus:ring-0" required>
          <label for="confirm" class="ml-2 text-gray-700">Je confirme que mes informations sont correctes</label>
          <p *ngIf="confirm.invalid && confirm.touched" class="text-red-500 text-sm">Vous devez confirmer les informations.</p>
        </div>

        <button type="submit"
          class="w-full bg-orange-500 text-white py-3 rounded-lg hover:bg-orange-600 focus:outline-none focus:ring-2 focus:ring-orange-500 disabled:opacity-50 disabled:cursor-not-allowed"
          [disabled]="contactForm.invalid || isSubmitting">
          <span *ngIf="!isSubmitting">Envoyer</span>
          <span *ngIf="isSubmitting">
            <svg class="animate-spin h-5 w-5 mx-auto text-white" xmlns="http://www.w3.org/2000/svg" fill="none"
              viewBox="0 0 24 24">
              <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
              <path class="opacity-75" fill="currentColor"
                d="M4 12a8 8 0 018-8v4l4-4-4-4v4a8 8 0 000 16v4l4-4-4-4v4a8 8 0 01-8-8z"></path>
            </svg>
          </span>
        </button>
      </form>

      <p *ngIf="messageSent" class="text-green-600 text-center mt-4">Votre message a bien été envoyé !</p>
      <p *ngIf="messageError" class="text-red-600 text-center mt-4">Une erreur est survenue, veuillez réessayer.</p>
    </div>
  </section>
</div>
